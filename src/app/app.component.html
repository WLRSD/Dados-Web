<app-navbar></app-navbar>

<div class="search-container">
  <mat-form-field appearance="outline">
    <mat-label>Pesquisa</mat-label>
    <input matInput placeholder="Digite sua consulta" [(ngModel)]="query" />
  </mat-form-field>
  <div class="query-buttons">
    <button mat-raised-button color="accent" (click)="addQueryPart('SELECT')">SELECT</button>
    <button mat-raised-button color="accent" (click)="addQueryPart('*')">*</button>
    <button mat-raised-button color="accent" (click)="addQueryPart('FROM')">FROM</button>
  </div>
</div>


<div *ngIf="isQueryValid()" class="card-container">
  <mat-card class="mat-elevation-z2">
    <mat-card-header>
      <mat-card-title>Tabela A</mat-card-title>
      <mat-card-subtitle>Informações sobre a Tabela A</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      Esta tabela contém dados relacionados a X.
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="showTable('A')">Ver Tabela A</button>
    </mat-card-actions>
  </mat-card>

  <mat-card class="mat-elevation-z2">
    <mat-card-header>
      <mat-card-title>Tabela B</mat-card-title>
      <mat-card-subtitle>Informações sobre a Tabela B</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      Esta tabela contém dados relacionados a Y.
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="showTable('B')">Ver Tabela B</button>
    </mat-card-actions>
  </mat-card>

  <mat-card class="mat-elevation-z2">
    <mat-card-header>
      <mat-card-title>Tabela C</mat-card-title>
      <mat-card-subtitle>Informações sobre a Tabela C</mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      Esta tabela contém dados relacionados a Z.
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="showTable('C')">Ver Tabela C</button>
    </mat-card-actions>
  </mat-card>
</div>


<div *ngIf="!isQueryValid()" class="no-data-message">
  <p>Nenhuma tabela encontrada. Digite a query "SELECT * FROM" para visualizar as tabelas.</p>
</div>


<div *ngIf="isQueryValid() && selectedTable" class="table-container">
  <div class="table-wrapper">

    <app-filtro-tabela (filtroChange)="applyFilter($event)"></app-filtro-tabela>

    <mat-toolbar color="primary">Tabela {{selectedTable}} - Dados de {{selectedTableData.label}}</mat-toolbar>
    <table mat-table [dataSource]="selectedTableData.dataSource" class="mat-elevation-z8">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>

      <ng-container matColumnDef="value">
        <th mat-header-cell *matHeaderCellDef> Value </th>
        <td mat-cell *matCellDef="let element"> {{element.value}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
<div *ngIf="isQueryValid() && selectedTable" class="table-container">
  <div class="table-wrapper">
    <mat-toolbar color="primary">Tabela {{selectedTable}} - Dados de {{selectedTableData.label}}</mat-toolbar>
    <table mat-table [dataSource]="selectedTableData.dataSource" class="mat-elevation-z8">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>

      <ng-container matColumnDef="value">
        <th mat-header-cell *matHeaderCellDef> Value </th>
        <td mat-cell *matCellDef="let element"> {{element.value}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>


<router-outlet></router-outlet>
